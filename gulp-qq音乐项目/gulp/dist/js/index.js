"use strict";var data,len,timer,time2,deg=0,audio=player.AudioManager,progress=player.progress;function getDate(e){$.ajax({type:"get",url:e,success:function(e){console.log(e),len=e.length,data=e,player.render(e[0]),audio.getAudio(e[0].audio),progress.renderAllTime(e[0].duration),progress.updata(audio.audio.currentTime)},error:function(){console.log("请求失败")}})}function bindEvent(){$("body").on("play:change",function(e,a){clearInterval(timer),$(".img-box").css({transform:"rotateZ(0deg)",transition:"all 0s linear"}),player.render(data[a]),audio.getAudio(data[a].audio),progress.renderAllTime(data[a].duration),progress.updata(0),progress.start(),"play"==audio.status?(audio.play(),rotate(0)):window.deg=0}),$(".btn.prev").on("click",function(){var e=player.ContorlIndex.prev();$("body").trigger("play:change",e)}),$(".btn.next").on("click",function(){var e=player.ContorlIndex.next();$("body").trigger("play:change",e)}),$(".play").on("click",function(){"pause"==audio.status?(audio.play(),rotate(deg),progress.start()):(audio.pause(),progress.stop(),clearInterval(timer)),$(".play").toggleClass("playing")}),$(".btn.like").on("click",function(){var e=player.ContorlIndex.index;data[e].isLike?(data[e].isLike=!1,$(".btn.like").removeClass("liking")):(data[e].isLike=!0,$(".btn.like").addClass("liking"))})}function rotate(e){timer=setInterval(function(){e+=1,window.deg=e,$(".img-box").css({transform:"rotateZ("+e+"deg)",transition:"all .1s linear"})},100)}getDate("../mock/data.json"),bindEvent();